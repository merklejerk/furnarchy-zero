import{f as m,a as _}from"../chunks/B36h28Ez.js";import{i as ie}from"../chunks/Y9XORz2r.js";import{o as ne}from"../chunks/DxZxUW1L.js";import{L as oe,W as ke,X as Ue,N as y,x as e,O as de,P as t,y as h,w as U,R as r,Q as l,D as n,I as Se,V as Ae}from"../chunks/Do66v2T9.js";import{e as g,s as P}from"../chunks/DQ8Ufe3j.js";import{e as Fe,b as ae,p as se,g as Le,a as Re,c as Z,r as te,s as le,d as $,f as re,i as $e,h as j,j as Ce,v as Be,k as Oe,F as De,m as Ie}from"../chunks/B5HXz-XI.js";import{i as C,s as Ve,a as Ee}from"../chunks/Dz5cLF74.js";var He=m('<div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">Version:</span> </div>'),Te=m('<div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">Author:</span> </div>'),Xe=m('<div class="plugin-details svelte-d580bl"><!> <!> <div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">URL:</span> <a target="_blank" rel="noopener noreferrer" class="url-link svelte-d580bl"> </a></div> <button class="remove-btn svelte-d580bl">Remove Plugin</button></div>'),Ye=m('<li><div class="plugin-header svelte-d580bl"><div class="plugin-title-group svelte-d580bl"><div></div> <span class="plugin-name svelte-d580bl"> </span></div></div> <!></li>'),Ze=m('<li class="empty svelte-d580bl">No plugins installed</li>'),je=m(`<div class="settings-panel retro-theme svelte-d580bl"><section class="svelte-d580bl"><h3 class="svelte-d580bl">Custom Auth Proxy Server</h3> <p class="desc svelte-d580bl">A CORS-friendly proxy server that forwards login requests to the official Furacadia auth server (terra.furcadia.com).
            Be careful! Your password will be transmitted to this address. By default we provide our own, which does not log or store credentials,
            but you can instead use yours for peace of mind.</p> <div class="input-group svelte-d580bl"><input type="text" class="svelte-d580bl"/> <button class="svelte-d580bl">Save</button></div></section> <section class="svelte-d580bl"><h3 class="svelte-d580bl">Plugins</h3> <p class="desc svelte-d580bl">Load external JavaScript plugins to enhance your game client. 
            Plugins are loaded from the provided URL and have full access to the game environment.</p> <div class="input-group svelte-d580bl"><input type="text" placeholder="https://example.com/my-plugin.js" class="svelte-d580bl"/> <button class="svelte-d580bl"> </button></div> <ul class="plugin-list svelte-d580bl"><!> <!></ul></section></div>`);function ze(B,S){oe(S,!1);const o=()=>Ee(se,"$pluginStore",w),[w,x]=Ve(),f=U();let d=U(""),b=U(""),c=U(null),u=U(!1);ne(()=>{se.set(Le()),h(b,Re()||Z.PUBLIC_AUTH_PROXY_URL)});async function z(){if(e(d)){if(o().some(s=>s.url===e(d))){alert("Plugin already added!");return}h(u,!0);try{const s=await Be(e(d)),a=[...o(),{url:e(d),name:s.name,version:s.version,author:s.author,enabled:!0}];j(a),h(d,"")}catch(s){alert(`Failed to verify plugin: ${s.message||s}`)}finally{h(u,!1)}}}function ve(s){const a=o().filter(i=>i.url!==s);j(a)}function ce(s){const a=o().map(i=>i.url===s?{...i,enabled:i.enabled===void 0?!1:!i.enabled}:i);j(a)}function ue(){Ce(e(b)),alert("Settings saved!")}ke(()=>o(),()=>{h(f,o())}),Ue(),ie();var O=je(),D=t(O),N=r(t(D),4),A=t(N);te(A);var he=r(A,2);l(N),l(D);var q=r(D,2),I=r(t(q),4),k=t(I);te(k);var F=r(k,2),fe=t(F,!0);l(F),l(I);var G=r(I,2),J=t(G);Fe(J,1,()=>e(f),$e,(s,a)=>{var i=Ye();let M;var V=t(i),Q=t(V),L=t(Q);let W;var E=r(L,2),ge=t(E,!0);l(E),l(Q),l(V);var _e=r(V,2);{var me=H=>{var R=Xe(),K=t(R);{var ye=v=>{var p=He(),Y=r(t(p));l(p),y(()=>P(Y,` ${e(a),n(()=>e(a).version)??""}`)),_(v,p)};C(K,v=>{e(a),n(()=>e(a).version)&&v(ye)})}var ee=r(K,2);{var Pe=v=>{var p=Te(),Y=r(t(p));l(p),y(()=>P(Y,` ${e(a),n(()=>e(a).author)??""}`)),_(v,p)};C(ee,v=>{e(a),n(()=>e(a).author)&&v(Pe)})}var T=r(ee,2),X=r(t(T),2),we=t(X,!0);l(X),l(T);var xe=r(T,2);l(R),y(()=>{$(X,"href",(e(a),n(()=>e(a).url))),P(we,(e(a),n(()=>e(a).url)))}),g("click",xe,()=>ve(e(a).url)),g("click",R,re(function(v){Oe.call(this,S,v)})),_(H,R)};C(_e,H=>{e(c),e(a),n(()=>e(c)===e(a).url)&&H(me)})}l(i),y(()=>{M=le(i,1,"plugin-item svelte-d580bl",null,M,{expanded:e(c)===e(a).url,disabled:e(a).enabled===!1}),W=le(L,1,"toggle-switch svelte-d580bl",null,W,{checked:e(a).enabled!==!1}),$(L,"title",(e(a),n(()=>e(a).enabled!==!1?"Disable Plugin":"Enable Plugin"))),$(E,"title",(e(a),n(()=>e(a).url))),P(ge,(e(a),n(()=>e(a).name||e(a).url)))}),g("click",L,re(()=>ce(e(a).url))),g("click",i,()=>h(c,e(c)===e(a).url?null:e(a).url)),_(s,i)});var be=r(J,2);{var pe=s=>{var a=Ze();_(s,a)};C(be,s=>{e(f),n(()=>e(f).length===0)&&s(pe)})}l(G),l(q),l(O),y(()=>{$(A,"placeholder",(Se(Z),n(()=>Z.PUBLIC_AUTH_PROXY_URL))),k.disabled=e(u),F.disabled=e(u),P(fe,e(u)?"Verifying...":"Add")}),ae(A,()=>e(b),s=>h(b,s)),g("click",he,ue),ae(k,()=>e(d),s=>h(d,s)),g("keydown",k,s=>s.key==="Enter"&&!e(u)&&z()),g("click",F,z),_(B,O),de(),x()}var Ne=m(`<div class="landing-page retro-theme svelte-1uha8ag"><header class="svelte-1uha8ag"><img src="/logo.png" alt="Furnarchy Zero Logo" width="384"/> <p class="subtitle svelte-1uha8ag">A plugin-enabled web client for Furcadia.</p> <div class="version svelte-1uha8ag"> </div></header> <main><div class="actions svelte-1uha8ag"><a href="/play" class="play-btn svelte-1uha8ag">Launch Client</a></div> <div class="info-section svelte-1uha8ag"><h2 class="svelte-1uha8ag">About</h2> <p>Furnarchy Zero is a wrapper around the official Furcadia web client that enables 
                client-side scripting and plugins. Brought to you by the author of Furnarchy 1, 3, and 2 (yes, counting is hard).</p> <p><strong>Disclaimer:</strong> This is an experimental third-party tool and is not affiliated with 
                Dragon's Eye Productions. Use at your own risk. Plugins have full access to your 
                game session. Only install plugins from trusted sources.</p></div> <div class="settings-section"><h2 class="svelte-1uha8ag">Configuration</h2> <!></div></main> <footer class="svelte-1uha8ag"><div class="footer-links svelte-1uha8ag"><a href="https://github.com/furnarchy/furnarchy-zero" target="_blank" rel="noopener noreferrer" class="svelte-1uha8ag">GitHub</a> <span class="separator svelte-1uha8ag">â€¢</span> <a href="https://github.com/furnarchy/furnarchy-zero/issues" target="_blank" rel="noopener noreferrer" class="svelte-1uha8ag">Report Issue</a></div> <p>Furnarchy Zero &copy; 2025</p></footer></div>`);function ea(B,S){oe(S,!1);const o=new De().version;ne(async()=>{await Ie(o)}),ie();var w=Ne(),x=t(w),f=r(t(x),4),d=t(f);l(f),l(x);var b=r(x,2),c=r(t(b),4),u=r(t(c),2);ze(u,{}),l(c),l(b),Ae(2),l(w),y(()=>P(d,`v${o??""}`)),_(B,w),de()}export{ea as component};
