import{f as _,a as m}from"../chunks/BTCE0DZM.js";import{i as ie}from"../chunks/v9LOXSqa.js";import{o as ne}from"../chunks/Db6ANrXm.js";import{L as oe,W as xe,X as Ue,N as y,x as e,O as de,P as t,y as h,w as U,R as l,Q as r,D as n,I as Se,Y as $e,$ as Ae,V as Fe}from"../chunks/Cg5NIOCX.js";import{e as g,s as P}from"../chunks/oVO9CO60.js";import{h as Le}from"../chunks/B_JrXAzN.js";import{e as Re,b as ae,p as se,g as Ce,a as Be,c as X,r as te,s as re,d as R,f as le,i as Oe,h as z,j as je,v as De,k as Ie,F as Ve,m as Ye}from"../chunks/I2l-jb6i.js";import{i as C,s as Ze,a as Ee}from"../chunks/BJP9K3nK.js";var He=_('<div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">Version:</span> </div>'),Te=_('<div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">Author:</span> </div>'),Xe=_('<div class="plugin-details svelte-d580bl"><!> <!> <div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">URL:</span> <a target="_blank" rel="noopener noreferrer" class="url-link svelte-d580bl"> </a></div> <button class="remove-btn svelte-d580bl">Remove Plugin</button></div>'),ze=_('<li><div class="plugin-header svelte-d580bl"><div class="plugin-title-group svelte-d580bl"><div></div> <span class="plugin-name svelte-d580bl"> </span></div></div> <!></li>'),Ne=_('<li class="empty svelte-d580bl">No plugins installed</li>'),qe=_(`<div class="settings-panel retro-theme svelte-d580bl"><section class="svelte-d580bl"><h3 class="svelte-d580bl">Custom Auth Proxy Server</h3> <p class="desc svelte-d580bl">A CORS-friendly proxy server that forwards login requests to the official Furacadia auth
			server (terra.furcadia.com). Be careful! Your password will be transmitted to this address. By
			default we provide our own, which does not log or store credentials, but you can instead use
			yours for peace of mind.</p> <div class="input-group svelte-d580bl"><input type="text" class="svelte-d580bl"/> <button class="svelte-d580bl">Save</button></div></section> <section class="svelte-d580bl"><h3 class="svelte-d580bl">Plugins</h3> <p class="desc svelte-d580bl">Load external JavaScript plugins to enhance your game client. Plugins are loaded from the
			provided URL and have full access to the game environment.</p> <div class="input-group svelte-d580bl"><input type="text" placeholder="https://example.com/my-plugin.js" class="svelte-d580bl"/> <button class="svelte-d580bl"> </button></div> <ul class="plugin-list svelte-d580bl"><!> <!></ul></section></div>`);function Ge(B,S){oe(S,!1);const o=()=>Ee(se,"$pluginStore",w),[w,k]=Ze(),f=U();let d=U(""),b=U(""),c=U(null),u=U(!1);ne(()=>{se.set(Ce()),h(b,Be()||X.PUBLIC_AUTH_PROXY_URL)});async function O(){if(e(d)){if(o().some(s=>s.url===e(d))){alert("Plugin already added!");return}h(u,!0);try{const s=await De(e(d)),a=[...o(),{url:e(d),name:s.name,version:s.version,author:s.author,enabled:!0}];z(a),h(d,"")}catch(s){alert(`Failed to verify plugin: ${s.message||s}`)}finally{h(u,!1)}}}function ve(s){const a=o().filter(i=>i.url!==s);z(a)}function ce(s){const a=o().map(i=>i.url===s?{...i,enabled:i.enabled===void 0?!1:!i.enabled}:i);z(a)}function ue(){je(e(b)),alert("Settings saved!")}xe(()=>o(),()=>{h(f,o())}),Ue(),ie();var j=qe(),D=t(j),N=l(t(D),4),$=t(N);te($);var he=l($,2);r(N),r(D);var q=l(D,2),I=l(t(q),4),x=t(I);te(x);var A=l(x,2),fe=t(A,!0);r(A),r(I);var G=l(I,2),J=t(G);Re(J,1,()=>e(f),Oe,(s,a)=>{var i=ze();let M;var V=t(i),Q=t(V),F=t(Q);let W;var Y=l(F,2),ge=t(Y,!0);r(Y),r(Q),r(V);var me=l(V,2);{var _e=Z=>{var L=Xe(),K=t(L);{var ye=v=>{var p=He(),T=l(t(p));r(p),y(()=>P(T,` ${e(a),n(()=>e(a).version)??""}`)),m(v,p)};C(K,v=>{e(a),n(()=>e(a).version)&&v(ye)})}var ee=l(K,2);{var Pe=v=>{var p=Te(),T=l(t(p));r(p),y(()=>P(T,` ${e(a),n(()=>e(a).author)??""}`)),m(v,p)};C(ee,v=>{e(a),n(()=>e(a).author)&&v(Pe)})}var E=l(ee,2),H=l(t(E),2),we=t(H,!0);r(H),r(E);var ke=l(E,2);r(L),y(()=>{R(H,"href",(e(a),n(()=>e(a).url))),P(we,(e(a),n(()=>e(a).url)))}),g("click",ke,()=>ve(e(a).url)),g("click",L,le(function(v){Ie.call(this,S,v)})),m(Z,L)};C(me,Z=>{e(c),e(a),n(()=>e(c)===e(a).url)&&Z(_e)})}r(i),y(()=>{M=re(i,1,"plugin-item svelte-d580bl",null,M,{expanded:e(c)===e(a).url,disabled:e(a).enabled===!1}),W=re(F,1,"toggle-switch svelte-d580bl",null,W,{checked:e(a).enabled!==!1}),R(F,"title",(e(a),n(()=>e(a).enabled!==!1?"Disable Plugin":"Enable Plugin"))),R(Y,"title",(e(a),n(()=>e(a).url))),P(ge,(e(a),n(()=>e(a).name||e(a).url)))}),g("click",F,le(()=>ce(e(a).url))),g("click",i,()=>h(c,e(c)===e(a).url?null:e(a).url)),m(s,i)});var be=l(J,2);{var pe=s=>{var a=Ne();m(s,a)};C(be,s=>{e(f),n(()=>e(f).length===0)&&s(pe)})}r(G),r(q),r(j),y(()=>{R($,"placeholder",(Se(X),n(()=>X.PUBLIC_AUTH_PROXY_URL))),x.disabled=e(u),A.disabled=e(u),P(fe,e(u)?"Verifying...":"Add")}),ae($,()=>e(b),s=>h(b,s)),g("click",he,ue),ae(x,()=>e(d),s=>h(d,s)),g("keydown",x,s=>s.key==="Enter"&&!e(u)&&O()),g("click",A,O),m(B,j),de(),k()}var Je=_(`<div class="landing-page retro-theme svelte-1uha8ag"><header class="svelte-1uha8ag"><img src="/logo.png" alt="Furnarchy Zero Logo" width="384"/> <p class="subtitle svelte-1uha8ag">A plugin-enabled web client for Furcadia.</p> <div class="version svelte-1uha8ag"> </div></header> <main><div class="actions svelte-1uha8ag"><a href="/play" class="play-btn svelte-1uha8ag">Launch Client</a></div> <div class="info-section svelte-1uha8ag"><h2 class="svelte-1uha8ag">About</h2> <p>Furnarchy Zero is a wrapper around the official Furcadia web client that enables client-side
				scripting and plugins. Brought to you by the author of Furnarchy 1, 3, and 2 (yes, counting
				is hard).</p> <p><strong>Disclaimer:</strong> This is an experimental third-party tool and is not affiliated with
				Dragon's Eye Productions. Use at your own risk. Plugins have full access to your game session.
				Only install plugins from trusted sources.</p></div> <div class="settings-section"><h2 class="svelte-1uha8ag">Configuration</h2> <!></div></main> <footer class="svelte-1uha8ag"><div class="footer-links svelte-1uha8ag"><a href="https://github.com/merklejerk/furnarchy-zero" target="_blank" rel="noopener noreferrer" class="svelte-1uha8ag">GitHub</a> <span class="separator svelte-1uha8ag">â€¢</span> <a href="https://github.com/merklejerk/furnarchy-zero/issues" target="_blank" rel="noopener noreferrer" class="svelte-1uha8ag">Report Issue</a></div> <p>Furnarchy Zero &copy; 2025</p></footer></div>`);function ra(B,S){oe(S,!1);const o=new Ve().version;ne(async()=>{await Ye(o)}),ie();var w=Je();Le("1uha8ag",O=>{$e(()=>{Ae.title="Furnarchy Zero"})});var k=t(w),f=l(t(k),4),d=t(f);r(f),r(k);var b=l(k,2),c=l(t(b),4),u=l(t(c),2);Ge(u,{}),r(c),r(b),Fe(2),r(w),y(()=>P(d,`v${o??""}`)),m(B,w),de()}export{ra as component};
