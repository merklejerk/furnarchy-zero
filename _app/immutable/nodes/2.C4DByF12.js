import{f as p,e as w,b as f,s as m}from"../chunks/B3FnF0oJ.js";import{i as pe}from"../chunks/DumpmRuy.js";import{o as ge}from"../chunks/iqYowYmk.js";import{af as be,as as Ee,at as De,t as _,i as a,ah as me,ai as r,m as b,R as U,ak as t,aj as l,u as i,ad as Le,y as je,au as ze,av as X}from"../chunks/B34q5ZhI.js";import{h as Me}from"../chunks/wBzAbtsP.js";import{e as Ie,i as Oe}from"../chunks/T5S5BKvr.js";import{i as x,s as Te,a as Ye}from"../chunks/B-8yQNBF.js";import{b as ie,r as de,s as ce,a as M,c as ve}from"../chunks/B8CywloG.js";import{p as ue,g as he,a as Be,e as q,v as fe,u as Ze,m as Ge,s as N,b as He,c as Ve,M as We,d as Xe}from"../chunks/BxwQyXgX.js";import{F as qe}from"../chunks/CLvAv9OV.js";var Ne=p('<div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">ID:</span> </div>'),Je=p('<div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">Version:</span> </div>'),Ke=p('<div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">Author:</span> </div>'),Qe=p('<div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">Description:</span> </div>'),ea=p('<div class="plugin-details svelte-d580bl"><!> <!> <!> <!> <div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">URL:</span> <a target="_blank" rel="noopener" class="url-link svelte-d580bl"> </a></div> <button class="remove-btn svelte-d580bl">Remove Plugin</button></div>'),aa=p('<li><div class="plugin-header svelte-d580bl"><div class="plugin-title-group svelte-d580bl"><div></div> <span class="plugin-name svelte-d580bl"> </span></div></div> <!></li>'),sa=p('<li class="empty svelte-d580bl">No plugins installed</li>'),ta=p(`<div class="settings-panel retro-theme svelte-d580bl"><section class="svelte-d580bl"><h3 class="svelte-d580bl">Plugins</h3> <p class="desc svelte-d580bl">Manage your library of installed plugins. These scripts are loaded into the game client to
			provide extra features. Use the toggle switch to enable or disable them. You can also toggle
			them in-game via the Furnarchy menu.</p> <p class="desc warning svelte-d580bl"><strong>Warning:</strong> Plugins have full access to your game session. Only install plugins from
			trusted sources.</p> <p class="desc svelte-d580bl">See the <a href="https://github.com/merklejerk/furnarchy-zero" target="_blank" rel="noopener">Github README</a> for information on developing plugins.</p> <div class="input-group svelte-d580bl"><input type="text" placeholder="https://example.com/my-plugin.js" class="svelte-d580bl"/> <button class="svelte-d580bl"> </button></div> <ul class="plugin-list svelte-d580bl"><!> <!></ul></section> <section class="svelte-d580bl"><h3 class="svelte-d580bl">Auth Proxy Server</h3> <p class="desc svelte-d580bl">A CORS-friendly proxy server that forwards login requests to the official Furacadia auth
			server (terra.furcadia.com). Be careful! Your password will be transmitted to this address.
			The default is the furnarchy auth proxy (terra.furnarchy.xyz), which is secure, open source,
			and does not log or store credentials. You can also plug in your own for peace of mind.</p> <p class="desc svelte-d580bl">Check the <a href="https://github.com/merklejerk/furnarchy-zero" target="_blank" rel="noopener">Github README</a> for why this is necessary.</p> <div class="input-group svelte-d580bl"><input type="text" class="svelte-d580bl"/> <button class="svelte-d580bl">Save</button></div></section></div>`);function ra(I,F){be(F,!1);const c=()=>Ye(ue,"$pluginStore",S),[S,$]=Te(),y=U();let v=U(""),k=U(""),u=U(null),h=U(!1);ge(()=>{ue.set(he()),b(k,Be()||q.PUBLIC_AUTH_PROXY_URL),R()});async function R(){const s=he();await Promise.all(s.map(async e=>{try{const o=await fe(e.url);Ze(e.url,{id:o.id,name:o.name,description:o.description,version:o.version,author:o.author,toggle:o.toggle})}catch(o){console.warn(`[SettingsPanel] Failed to refresh metadata for ${e.url}`,o)}}))}async function C(){if(a(v)){if(c().some(s=>s.url===a(v))){alert("Plugin already added!");return}b(h,!0);try{const s=await fe(a(v)),e=[...c(),{id:s.id,url:a(v),name:s.name,description:s.description,version:s.version,author:s.author,enabled:s.toggle!==void 0?!s.toggle:!0,toggle:s.toggle}];N(e),b(v,"")}catch(s){alert(`Failed to verify plugin: ${s.message||s}`)}finally{b(h,!1)}}}function E(s){const e=c().find(g=>g.url===s);e&&e.id&&Ge(e.id);const o=c().filter(g=>g.url!==s);N(o)}function O(s){const e=c().map(o=>o.url===s?{...o,enabled:o.enabled===void 0?!1:!o.enabled}:o);N(e)}function J(){He(a(k)),alert("Settings saved!")}Ee(()=>c(),()=>{b(y,[...c()].sort((s,e)=>{const o=s.enabled!==!1,g=e.enabled!==!1;return o!==g?o?-1:1:(s.name||s.url).localeCompare(e.name||e.url)}))}),De(),pe();var T=ta(),Y=r(T),B=t(r(Y),8),A=r(B);de(A);var D=t(A,2),_e=r(D,!0);l(D),l(B);var K=t(B,2),Q=r(K);Ie(Q,1,()=>a(y),Oe,(s,e)=>{var o=aa();let g;var Z=r(o),se=r(Z),j=r(se);let te;var G=t(j,2),we=r(G,!0);l(G),l(se),l(Z);var xe=t(Z,2);{var Se=H=>{var z=ea(),re=r(z);{var $e=n=>{var d=Ne(),P=t(r(d));l(d),_(()=>m(P,` ${a(e),i(()=>a(e).id)??""}`)),f(n,d)};x(re,n=>{a(e),i(()=>a(e).id)&&n($e)})}var le=t(re,2);{var Ae=n=>{var d=Je(),P=t(r(d));l(d),_(()=>m(P,` ${a(e),i(()=>a(e).version)??""}`)),f(n,d)};x(le,n=>{a(e),i(()=>a(e).version)&&n(Ae)})}var oe=t(le,2);{var Ue=n=>{var d=Ke(),P=t(r(d));l(d),_(()=>m(P,` ${a(e),i(()=>a(e).author)??""}`)),f(n,d)};x(oe,n=>{a(e),i(()=>a(e).author)&&n(Ue)})}var ne=t(oe,2);{var Fe=n=>{var d=Qe(),P=t(r(d));l(d),_(()=>m(P,` ${a(e),i(()=>a(e).description)??""}`)),f(n,d)};x(ne,n=>{a(e),i(()=>a(e).description)&&n(Fe)})}var V=t(ne,2),W=t(r(V),2),Re=r(W,!0);l(W),l(V);var Ce=t(V,2);l(z),_(()=>{M(W,"href",(a(e),i(()=>a(e).url))),m(Re,(a(e),i(()=>a(e).url)))}),w("click",Ce,()=>E(a(e).url)),w("click",z,ve(function(n){Ve.call(this,F,n)})),f(H,z)};x(xe,H=>{a(u),a(e),i(()=>a(u)===a(e).url)&&H(Se)})}l(o),_(()=>{g=ce(o,1,"plugin-item svelte-d580bl",null,g,{expanded:a(u)===a(e).url,disabled:a(e).enabled===!1&&!a(e).toggle}),te=ce(j,1,"toggle-switch svelte-d580bl",null,te,{checked:a(e).enabled!==!1}),M(j,"title",(a(e),i(()=>a(e).enabled!==!1?"Disable Plugin":"Enable Plugin"))),M(G,"title",(a(e),i(()=>a(e).url))),m(we,(a(e),i(()=>a(e).name||a(e).url)))}),w("click",j,ve(()=>O(a(e).url))),w("click",o,()=>b(u,a(u)===a(e).url?null:a(e).url)),f(s,o)});var ye=t(Q,2);{var ke=s=>{var e=sa();f(s,e)};x(ye,s=>{a(y),i(()=>a(y).length===0)&&s(ke)})}l(K),l(Y);var ee=t(Y,2),ae=t(r(ee),6),L=r(ae);de(L);var Pe=t(L,2);l(ae),l(ee),l(T),_(()=>{A.disabled=a(h),D.disabled=a(h),m(_e,a(h)?"Verifying...":"Add"),M(L,"placeholder",(Le(q),i(()=>q.PUBLIC_AUTH_PROXY_URL)))}),ie(A,()=>a(v),s=>b(v,s)),w("keydown",A,s=>s.key==="Enter"&&!a(h)&&C()),w("click",D,C),ie(L,()=>a(k),s=>b(k,s)),w("click",Pe,J),f(I,T),me(),$()}var la=p(`<div class="landing-page retro-theme svelte-1uha8ag"><header class="svelte-1uha8ag"><img src="/logo.png" alt="Furnarchy Zero Logo" width="384"/> <p class="subtitle svelte-1uha8ag">A plugin-enabled web client for Furcadia.</p> <div class="version svelte-1uha8ag"> </div></header> <main><div class="actions svelte-1uha8ag"><a href="/play" class="play-btn svelte-1uha8ag" data-sveltekit-reload="">Launch Client</a></div> <div class="info-section svelte-1uha8ag"><h2 class="svelte-1uha8ag">About</h2> <p>Furnarchy Zero is an open source wrapper around the official Furcadia web client that
				enables client-side scripting and plugins. Brought to you by the author of Furnarchy 1, 3,
				and 2 (yes, counting is hard).</p> <p>While in-game, look for the <span class="inline-icon svelte-1uha8ag"><!></span> icon in the top-right corner to access plugins, settings, and zoom controls.</p> <p class="disclaimer svelte-1uha8ag"><strong>Disclaimer:</strong> This is an experimental third-party tool and is not affiliated with
				Dragon's Eye Productions. Use at your own risk. Plugins have full access to your game session.
				Only install plugins from trusted sources.</p></div> <div class="settings-section"><h2 class="svelte-1uha8ag">Configuration</h2> <!></div></main> <footer class="svelte-1uha8ag"><div class="footer-links svelte-1uha8ag"><a href="https://github.com/merklejerk/furnarchy-zero" target="_blank" rel="noopener noreferrer" class="svelte-1uha8ag">GitHub</a> <span class="separator svelte-1uha8ag">â€¢</span> <a href="https://github.com/merklejerk/furnarchy-zero/issues" target="_blank" rel="noopener noreferrer" class="svelte-1uha8ag">Report Issue</a></div> <p>Furnarchy Zero &copy; 2025</p></footer></div>`);function ga(I,F){be(F,!1);const c=new qe().version;ge(async()=>{await Xe(c)}),pe();var S=la();Me("1uha8ag",J=>{je(()=>{ze.title="Furnarchy Zero"})});var $=r(S),y=t(r($),4),v=r(y);l(y),l($);var k=t($,2),u=t(r(k),2),h=t(r(u),4),R=t(r(h)),C=r(R);We(C),l(R),X(),l(h),X(2),l(u);var E=t(u,2),O=t(r(E),2);ra(O,{}),l(E),l(k),X(2),l(S),_(()=>m(v,`v${c??""}`)),f(I,S),me()}export{ga as component};
