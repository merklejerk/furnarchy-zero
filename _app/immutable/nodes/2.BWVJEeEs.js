import{f as h,e as w,a as u,s as g}from"../chunks/TaKWw6Tr.js";import{i as ce}from"../chunks/j2M9h5Jk.js";import{o as ue}from"../chunks/r3_wVOpG.js";import{B as he,a7 as Le,a8 as Ce,E as m,a as e,F as fe,G as r,s as p,a3 as A,I as t,H as l,u as n,z as De,n as Be,a9 as Ee,aa as je}from"../chunks/WP6s4_OC.js";import{F as Ie,h as ze}from"../chunks/D3sYG5D4.js";import{e as He,b as re,p as le,g as ie,a as Oe,c as V,v as oe,u as Ze,r as ne,s as de,d as B,f as ve,i as Ge,m as Te,h as Y,j as Ve,k as Ye,l as Me}from"../chunks/p6JeHI9M.js";import{i as x,s as Xe,a as qe}from"../chunks/DEPZNxei.js";var Je=h('<div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">ID:</span> </div>'),Ne=h('<div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">Version:</span> </div>'),Ke=h('<div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">Author:</span> </div>'),Qe=h('<div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">Description:</span> </div>'),We=h('<div class="plugin-details svelte-d580bl"><!> <!> <!> <!> <div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">URL:</span> <a target="_blank" rel="noopener noreferrer" class="url-link svelte-d580bl"> </a></div> <button class="remove-btn svelte-d580bl">Remove Plugin</button></div>'),ea=h('<li><div class="plugin-header svelte-d580bl"><div class="plugin-title-group svelte-d580bl"><div></div> <span class="plugin-name svelte-d580bl"> </span></div></div> <!></li>'),aa=h('<li class="empty svelte-d580bl">No plugins installed</li>'),sa=h(`<div class="settings-panel retro-theme svelte-d580bl"><section class="svelte-d580bl"><h3 class="svelte-d580bl">Auth Proxy Server</h3> <p class="desc svelte-d580bl">A CORS-friendly proxy server that forwards login requests to the official Furacadia auth
			server (terra.furcadia.com). Be careful! Your password will be transmitted to this address. By
			default we provide our own, which does not log or store credentials, but you can instead use
			yours for peace of mind.</p> <div class="input-group svelte-d580bl"><input type="text" class="svelte-d580bl"/> <button class="svelte-d580bl">Save</button></div></section> <section class="svelte-d580bl"><h3 class="svelte-d580bl">Plugins</h3> <p class="desc svelte-d580bl">Load external JavaScript plugins to enhance your game client. Plugins are loaded from the
			provided URL and have full access to the game environment.</p> <p class="desc svelte-d580bl">See the <a href="https://github.com/merklejerk/furnarchy-zero" target="_blank" rel="noopener noreferrer">Github README</a> for more information.</p> <div class="input-group svelte-d580bl"><input type="text" placeholder="https://example.com/my-plugin.js" class="svelte-d580bl"/> <button class="svelte-d580bl"> </button></div> <ul class="plugin-list svelte-d580bl"><!> <!></ul></section></div>`);function ta(E,F){he(F,!1);const v=()=>qe(le,"$pluginStore",S),[S,$]=Xe(),_=A();let c=A(""),y=A(""),f=A(null),b=A(!1);ue(()=>{le.set(ie()),p(y,Oe()||V.PUBLIC_AUTH_PROXY_URL),M()});async function M(){const s=ie();await Promise.all(s.map(async a=>{try{const i=await oe(a.url);Ze(a.url,{id:i.id,name:i.name,description:i.description,version:i.version,author:i.author})}catch(i){console.warn(`[SettingsPanel] Failed to refresh metadata for ${a.url}`,i)}}))}async function X(){if(e(c)){if(v().some(s=>s.url===e(c))){alert("Plugin already added!");return}p(b,!0);try{const s=await oe(e(c)),a=[...v(),{id:s.id,url:e(c),name:s.name,description:s.description,version:s.version,author:s.author,enabled:s.toggle!==void 0?!s.toggle:!0}];Y(a),p(c,"")}catch(s){alert(`Failed to verify plugin: ${s.message||s}`)}finally{p(b,!1)}}}function be(s){const a=v().find(k=>k.url===s);a&&a.id&&Te(a.id);const i=v().filter(k=>k.url!==s);Y(i)}function pe(s){const a=v().map(i=>i.url===s?{...i,enabled:i.enabled===void 0?!1:!i.enabled}:i);Y(a)}function ge(){Ve(e(y)),alert("Settings saved!")}Le(()=>v(),()=>{p(_,v())}),Ce(),ce();var j=sa(),I=r(j),q=t(r(I),4),R=r(q);ne(R);var me=t(R,2);l(q),l(I);var J=t(I,2),z=t(r(J),6),U=r(z);ne(U);var L=t(U,2),_e=r(L,!0);l(L),l(z);var N=t(z,2),K=r(N);He(K,1,()=>e(_),Ge,(s,a)=>{var i=ea();let k;var H=r(i),Q=r(H),C=r(Q);let W;var O=t(C,2),we=r(O,!0);l(O),l(Q),l(H);var ke=t(H,2);{var xe=Z=>{var D=We(),ee=r(D);{var Se=o=>{var d=Je(),P=t(r(d));l(d),m(()=>g(P,` ${e(a),n(()=>e(a).id)??""}`)),u(o,d)};x(ee,o=>{e(a),n(()=>e(a).id)&&o(Se)})}var ae=t(ee,2);{var $e=o=>{var d=Ne(),P=t(r(d));l(d),m(()=>g(P,` ${e(a),n(()=>e(a).version)??""}`)),u(o,d)};x(ae,o=>{e(a),n(()=>e(a).version)&&o($e)})}var se=t(ae,2);{var Ue=o=>{var d=Ke(),P=t(r(d));l(d),m(()=>g(P,` ${e(a),n(()=>e(a).author)??""}`)),u(o,d)};x(se,o=>{e(a),n(()=>e(a).author)&&o(Ue)})}var te=t(se,2);{var Ae=o=>{var d=Qe(),P=t(r(d));l(d),m(()=>g(P,` ${e(a),n(()=>e(a).description)??""}`)),u(o,d)};x(te,o=>{e(a),n(()=>e(a).description)&&o(Ae)})}var G=t(te,2),T=t(r(G),2),Fe=r(T,!0);l(T),l(G);var Re=t(G,2);l(D),m(()=>{B(T,"href",(e(a),n(()=>e(a).url))),g(Fe,(e(a),n(()=>e(a).url)))}),w("click",Re,()=>be(e(a).url)),w("click",D,ve(function(o){Ye.call(this,F,o)})),u(Z,D)};x(ke,Z=>{e(f),e(a),n(()=>e(f)===e(a).url)&&Z(xe)})}l(i),m(()=>{k=de(i,1,"plugin-item svelte-d580bl",null,k,{expanded:e(f)===e(a).url,disabled:e(a).enabled===!1}),W=de(C,1,"toggle-switch svelte-d580bl",null,W,{checked:e(a).enabled!==!1}),B(C,"title",(e(a),n(()=>e(a).enabled!==!1?"Disable Plugin":"Enable Plugin"))),B(O,"title",(e(a),n(()=>e(a).url))),g(we,(e(a),n(()=>e(a).name||e(a).url)))}),w("click",C,ve(()=>pe(e(a).url))),w("click",i,()=>p(f,e(f)===e(a).url?null:e(a).url)),u(s,i)});var ye=t(K,2);{var Pe=s=>{var a=aa();u(s,a)};x(ye,s=>{e(_),n(()=>e(_).length===0)&&s(Pe)})}l(N),l(J),l(j),m(()=>{B(R,"placeholder",(De(V),n(()=>V.PUBLIC_AUTH_PROXY_URL))),U.disabled=e(b),L.disabled=e(b),g(_e,e(b)?"Verifying...":"Add")}),re(R,()=>e(y),s=>p(y,s)),w("click",me,ge),re(U,()=>e(c),s=>p(c,s)),w("keydown",U,s=>s.key==="Enter"&&!e(b)&&X()),w("click",L,X),u(E,j),fe(),$()}var ra=h(`<div class="landing-page retro-theme svelte-1uha8ag"><header class="svelte-1uha8ag"><img src="/logo.png" alt="Furnarchy Zero Logo" width="384"/> <p class="subtitle svelte-1uha8ag">A plugin-enabled web client for Furcadia.</p> <div class="version svelte-1uha8ag"> </div></header> <main><div class="actions svelte-1uha8ag"><a href="/play" class="play-btn svelte-1uha8ag" data-sveltekit-reload="">Launch Client</a></div> <div class="info-section svelte-1uha8ag"><h2 class="svelte-1uha8ag">About</h2> <p>Furnarchy Zero is a wrapper around the official Furcadia web client that enables client-side
				scripting and plugins. Brought to you by the author of Furnarchy 1, 3, and 2 (yes, counting
				is hard).</p> <p><strong>Disclaimer:</strong> This is an experimental third-party tool and is not affiliated with
				Dragon's Eye Productions. Use at your own risk. Plugins have full access to your game session.
				Only install plugins from trusted sources.</p></div> <div class="settings-section"><h2 class="svelte-1uha8ag">Configuration</h2> <!></div></main> <footer class="svelte-1uha8ag"><div class="footer-links svelte-1uha8ag"><a href="https://github.com/merklejerk/furnarchy-zero" target="_blank" rel="noopener noreferrer" class="svelte-1uha8ag">GitHub</a> <span class="separator svelte-1uha8ag">â€¢</span> <a href="https://github.com/merklejerk/furnarchy-zero/issues" target="_blank" rel="noopener noreferrer" class="svelte-1uha8ag">Report Issue</a></div> <p>Furnarchy Zero &copy; 2025</p></footer></div>`);function ua(E,F){he(F,!1);const v=new Ie().version;ue(async()=>{await Me(v)}),ce();var S=ra();ze("1uha8ag",M=>{Be(()=>{Ee.title="Furnarchy Zero"})});var $=r(S),_=t(r($),4),c=r(_);l(_),l($);var y=t($,2),f=t(r(y),4),b=t(r(f),2);ta(b,{}),l(f),l(y),je(2),l(S),m(()=>g(c,`v${v??""}`)),u(E,S),fe()}export{ua as component};
