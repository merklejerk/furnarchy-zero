import{f as h,a as u}from"../chunks/BTCE0DZM.js";import{i as ne}from"../chunks/v9LOXSqa.js";import{o as de}from"../chunks/Db6ANrXm.js";import{L as ve,W as Ae,X as Fe,N as g,x as e,O as ce,P as r,y as p,w as A,R as t,Q as l,D as o,I as Re,Y as Le,$ as De,V as Ce}from"../chunks/Cg5NIOCX.js";import{e as k,s as _}from"../chunks/oVO9CO60.js";import{h as je}from"../chunks/B_JrXAzN.js";import{e as Be,b as te,p as re,g as Ee,a as Ie,c as X,r as le,s as ie,d as j,f as oe,i as Oe,m as Ve,h as G,j as Ye,v as Ze,k as ze,F as He,l as Te}from"../chunks/B7V_Lk9l.js";import{i as x,s as Xe,a as Ge}from"../chunks/BJP9K3nK.js";var Me=h('<div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">ID:</span> </div>'),Ne=h('<div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">Version:</span> </div>'),qe=h('<div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">Author:</span> </div>'),Je=h('<div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">Description:</span> </div>'),Qe=h('<div class="plugin-details svelte-d580bl"><!> <!> <!> <!> <div class="detail-row svelte-d580bl"><span class="label svelte-d580bl">URL:</span> <a target="_blank" rel="noopener noreferrer" class="url-link svelte-d580bl"> </a></div> <button class="remove-btn svelte-d580bl">Remove Plugin</button></div>'),We=h('<li><div class="plugin-header svelte-d580bl"><div class="plugin-title-group svelte-d580bl"><div></div> <span class="plugin-name svelte-d580bl"> </span></div></div> <!></li>'),Ke=h('<li class="empty svelte-d580bl">No plugins installed</li>'),ea=h(`<div class="settings-panel retro-theme svelte-d580bl"><section class="svelte-d580bl"><h3 class="svelte-d580bl">Auth Proxy Server</h3> <p class="desc svelte-d580bl">A CORS-friendly proxy server that forwards login requests to the official Furacadia auth
			server (terra.furcadia.com). Be careful! Your password will be transmitted to this address. By
			default we provide our own, which does not log or store credentials, but you can instead use
			yours for peace of mind.</p> <div class="input-group svelte-d580bl"><input type="text" class="svelte-d580bl"/> <button class="svelte-d580bl">Save</button></div></section> <section class="svelte-d580bl"><h3 class="svelte-d580bl">Plugins</h3> <p class="desc svelte-d580bl">Load external JavaScript plugins to enhance your game client. Plugins are loaded from the
			provided URL and have full access to the game environment.</p> <p class="desc svelte-d580bl">See the <a href="https://github.com/merklejerk/furnarchy-zero" target="_blank" rel="noopener noreferrer">Github README</a> for more information.</p> <div class="input-group svelte-d580bl"><input type="text" placeholder="https://example.com/my-plugin.js" class="svelte-d580bl"/> <button class="svelte-d580bl"> </button></div> <ul class="plugin-list svelte-d580bl"><!> <!></ul></section></div>`);function aa(B,F){ve(F,!1);const v=()=>Ge(re,"$pluginStore",$),[$,S]=Xe(),m=A();let c=A(""),y=A(""),f=A(null),b=A(!1);de(()=>{re.set(Ee()),p(y,Ie()||X.PUBLIC_AUTH_PROXY_URL)});async function E(){if(e(c)){if(v().some(s=>s.url===e(c))){alert("Plugin already added!");return}p(b,!0);try{const s=await Ze(e(c)),a=[...v(),{id:s.id,url:e(c),name:s.name,description:s.description,version:s.version,author:s.author,enabled:s.toggle!==void 0?!s.toggle:!0}];G(a),p(c,"")}catch(s){alert(`Failed to verify plugin: ${s.message||s}`)}finally{p(b,!1)}}}function ue(s){const a=v().find(w=>w.url===s);a&&a.id&&Ve(a.id);const d=v().filter(w=>w.url!==s);G(d)}function he(s){const a=v().map(d=>d.url===s?{...d,enabled:d.enabled===void 0?!1:!d.enabled}:d);G(a)}function fe(){Ye(e(y)),alert("Settings saved!")}Ae(()=>v(),()=>{p(m,v())}),Fe(),ne();var I=ea(),O=r(I),M=t(r(O),4),R=r(M);le(R);var be=t(R,2);l(M),l(O);var N=t(O,2),V=t(r(N),6),U=r(V);le(U);var L=t(U,2),pe=r(L,!0);l(L),l(V);var q=t(V,2),J=r(q);Be(J,1,()=>e(m),Oe,(s,a)=>{var d=We();let w;var Y=r(d),Q=r(Y),D=r(Q);let W;var Z=t(D,2),me=r(Z,!0);l(Z),l(Q),l(Y);var ye=t(Y,2);{var Pe=z=>{var C=Qe(),K=r(C);{var ke=i=>{var n=Me(),P=t(r(n));l(n),g(()=>_(P,` ${e(a),o(()=>e(a).id)??""}`)),u(i,n)};x(K,i=>{e(a),o(()=>e(a).id)&&i(ke)})}var ee=t(K,2);{var we=i=>{var n=Ne(),P=t(r(n));l(n),g(()=>_(P,` ${e(a),o(()=>e(a).version)??""}`)),u(i,n)};x(ee,i=>{e(a),o(()=>e(a).version)&&i(we)})}var ae=t(ee,2);{var xe=i=>{var n=qe(),P=t(r(n));l(n),g(()=>_(P,` ${e(a),o(()=>e(a).author)??""}`)),u(i,n)};x(ae,i=>{e(a),o(()=>e(a).author)&&i(xe)})}var se=t(ae,2);{var $e=i=>{var n=Je(),P=t(r(n));l(n),g(()=>_(P,` ${e(a),o(()=>e(a).description)??""}`)),u(i,n)};x(se,i=>{e(a),o(()=>e(a).description)&&i($e)})}var H=t(se,2),T=t(r(H),2),Se=r(T,!0);l(T),l(H);var Ue=t(H,2);l(C),g(()=>{j(T,"href",(e(a),o(()=>e(a).url))),_(Se,(e(a),o(()=>e(a).url)))}),k("click",Ue,()=>ue(e(a).url)),k("click",C,oe(function(i){ze.call(this,F,i)})),u(z,C)};x(ye,z=>{e(f),e(a),o(()=>e(f)===e(a).url)&&z(Pe)})}l(d),g(()=>{w=ie(d,1,"plugin-item svelte-d580bl",null,w,{expanded:e(f)===e(a).url,disabled:e(a).enabled===!1}),W=ie(D,1,"toggle-switch svelte-d580bl",null,W,{checked:e(a).enabled!==!1}),j(D,"title",(e(a),o(()=>e(a).enabled!==!1?"Disable Plugin":"Enable Plugin"))),j(Z,"title",(e(a),o(()=>e(a).url))),_(me,(e(a),o(()=>e(a).name||e(a).url)))}),k("click",D,oe(()=>he(e(a).url))),k("click",d,()=>p(f,e(f)===e(a).url?null:e(a).url)),u(s,d)});var ge=t(J,2);{var _e=s=>{var a=Ke();u(s,a)};x(ge,s=>{e(m),o(()=>e(m).length===0)&&s(_e)})}l(q),l(N),l(I),g(()=>{j(R,"placeholder",(Re(X),o(()=>X.PUBLIC_AUTH_PROXY_URL))),U.disabled=e(b),L.disabled=e(b),_(pe,e(b)?"Verifying...":"Add")}),te(R,()=>e(y),s=>p(y,s)),k("click",be,fe),te(U,()=>e(c),s=>p(c,s)),k("keydown",U,s=>s.key==="Enter"&&!e(b)&&E()),k("click",L,E),u(B,I),ce(),S()}var sa=h(`<div class="landing-page retro-theme svelte-1uha8ag"><header class="svelte-1uha8ag"><img src="/logo.png" alt="Furnarchy Zero Logo" width="384"/> <p class="subtitle svelte-1uha8ag">A plugin-enabled web client for Furcadia.</p> <div class="version svelte-1uha8ag"> </div></header> <main><div class="actions svelte-1uha8ag"><a href="/play" class="play-btn svelte-1uha8ag">Launch Client</a></div> <div class="info-section svelte-1uha8ag"><h2 class="svelte-1uha8ag">About</h2> <p>Furnarchy Zero is a wrapper around the official Furcadia web client that enables client-side
				scripting and plugins. Brought to you by the author of Furnarchy 1, 3, and 2 (yes, counting
				is hard).</p> <p><strong>Disclaimer:</strong> This is an experimental third-party tool and is not affiliated with
				Dragon's Eye Productions. Use at your own risk. Plugins have full access to your game session.
				Only install plugins from trusted sources.</p></div> <div class="settings-section"><h2 class="svelte-1uha8ag">Configuration</h2> <!></div></main> <footer class="svelte-1uha8ag"><div class="footer-links svelte-1uha8ag"><a href="https://github.com/merklejerk/furnarchy-zero" target="_blank" rel="noopener noreferrer" class="svelte-1uha8ag">GitHub</a> <span class="separator svelte-1uha8ag">â€¢</span> <a href="https://github.com/merklejerk/furnarchy-zero/issues" target="_blank" rel="noopener noreferrer" class="svelte-1uha8ag">Report Issue</a></div> <p>Furnarchy Zero &copy; 2025</p></footer></div>`);function ca(B,F){ve(F,!1);const v=new He().version;de(async()=>{await Te(v)}),ne();var $=sa();je("1uha8ag",E=>{Le(()=>{De.title="Furnarchy Zero"})});var S=r($),m=t(r(S),4),c=r(m);l(m),l(S);var y=t(S,2),f=t(r(y),4),b=t(r(f),2);aa(b,{}),l(f),l(y),Ce(2),l($),g(()=>_(c,`v${v??""}`)),u(B,$),ce()}export{ca as component};
